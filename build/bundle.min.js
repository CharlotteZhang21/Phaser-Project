!function e(t,i,o){function n(r,s){if(!i[r]){if(!t[r]){var l="function"==typeof require&&require;if(!s&&l)return l(r,!0);if(a)return a(r,!0);var h=new Error("Cannot find module '"+r+"'");throw h.code="MODULE_NOT_FOUND",h}var c=i[r]={exports:{}};t[r][0].call(c.exports,function(e){var i=t[r][1][e];return n(i||e)},c,c.exports,e,t,i,o)}return i[r].exports}for(var a="function"==typeof require&&require,r=0;r<o.length;r++)n(o[r]);return n}({1:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}({coin_burst_01:[{img:"logo.png"},{img:"cta.png"}],coin_cascade_05:[{img:"logo2.png"}]},"coin_cascade_05",[{img:"spin_button.png"},{img:"symbols.png"}])},{}],2:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=e("./pieces.js"),n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(o);i.default={pieces:n.default}},{"./pieces.js":3}],3:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default={frames:{blue:{frame:{x:152,y:1,w:151,h:161},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:151,h:161},sourceSize:{w:151,h:161}},blue_p:{frame:{x:156,y:164,w:151,h:161},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:151,h:161},sourceSize:{w:151,h:161}},donut:{frame:{x:609,y:164,w:181,h:149},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:181,h:149},sourceSize:{w:181,h:149}},green:{frame:{x:460,y:327,w:149,h:161},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:149,h:161},sourceSize:{w:149,h:161}},macaron:{frame:{x:610,y:1,w:148,h:155},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:148,h:155},sourceSize:{w:148,h:155}},marshmallow:{frame:{x:305,y:1,w:151,h:161},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:151,h:161},sourceSize:{w:151,h:161}},orange:{frame:{x:156,y:327,w:150,h:161},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:150,h:161},sourceSize:{w:150,h:161}},orange_p:{frame:{x:308,y:327,w:150,h:161},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:150,h:161},sourceSize:{w:150,h:161}},popcorn:{frame:{x:461,y:164,w:146,h:161},rotated:!1,trimmed:!0,spriteSourceSize:{x:2,y:0,w:146,h:161},sourceSize:{w:151,h:161}},pudding:{frame:{x:611,y:315,w:159,h:153},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:159,h:153},sourceSize:{w:159,h:153}},purple:{frame:{x:1,y:165,w:153,h:161},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:153,h:161},sourceSize:{w:153,h:161}},purple_p:{frame:{x:1,y:328,w:153,h:161},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:153,h:161},sourceSize:{w:153,h:161}},red:{frame:{x:309,y:164,w:150,h:161},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:150,h:161},sourceSize:{w:150,h:161}},red_p:{frame:{x:458,y:1,w:150,h:161},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:150,h:161},sourceSize:{w:150,h:161}},yellow:{frame:{x:1,y:1,w:149,h:162},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:149,h:162},sourceSize:{w:149,h:162}}},meta:{app:"http://www.codeandweb.com/texturepacker",version:"1.0",image:"tiles.png",format:"RGBA8888",size:{w:791,h:490},scale:"1",smartupdate:"$TexturePacker:SmartUpdate:a52266418105fd394661db76f76d6094:5da80af01517e173c5b36dd3086b03ba:accbe1e7e294ded8391337fc1c446319$"}}},{}],4:[function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var n=e("./states/boot"),a=o(n),r=e("./states/endcard"),s=o(r),l=e("./states/preloader"),h=o(l),c=new Phaser.Game(document.body.clientWidth*window.devicePixelRatio,document.body.clientHeight*window.devicePixelRatio,Phaser.CANVAS,"game",null,!0);c.state.add("boot",new a.default),c.state.add("endcard",new s.default),c.state.add("preloader",new h.default),c.state.start("boot")},{"./states/boot":14,"./states/endcard":15,"./states/preloader":16}],5:[function(e,t,i){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),s=function(e){function t(e){o(this,t);var i=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.createBackground(),i}return a(t,e),r(t,[{key:"createBackground",value:function(){var e=new Phaser.Sprite(this.game,0,0,"background");this.add(e);var t=this.width;this.height;this.game.global.windowHeight>this.game.global.windowWidth?(this.scale.x=this.game.global.windowHeight*window.devicePixelRatio/this.height*1.05,this.scale.y=this.scale.x,this.game.global.windowWidth*window.devicePixelRatio>this.width&&(this.scale.x=this.game.global.windowWidth*window.devicePixelRatio/t,this.scale.y=this.scale.x),this.x=this.game.global.windowWidth*window.devicePixelRatio/2-this.width/2,this.y=this.game.global.windowHeight*window.devicePixelRatio/2-this.height/2):(this.scale.x=this.game.global.windowWidth*window.devicePixelRatio/this.width*1.05,this.scale.y=this.scale.x,this.height<this.game.global.windowHeight*window.devicePixelRatio&&(this.scale.y=this.game.global.windowHeight*window.devicePixelRatio/this.width*1.05,this.scale.x=this.scale.y),this.x=this.game.global.windowWidth*window.devicePixelRatio/2-this.width/2,this.y=this.game.global.windowHeight*window.devicePixelRatio/2-this.height/2)}}]),t}(Phaser.Group);i.default=s},{}],6:[function(e,t,i){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),l=e("../utils/container-util"),h=o(l),c=e("../utils/animations-util"),d=(o(c),e("../utils/custom-png-sequences-renderer.js")),u=(o(d),function(e){function t(e,i){n(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.cookieWord=i,o.createBackground(),o.game.input.onUp.add(o.onUp,o),o.graphics=o.game.add.graphics(0,0),o.add(o.graphics),o.lettersToCookies=[],o.initializeLetters(),o.wordStarted=!1,o.letters="",o.inputLocked=!1,o.handTutorial=!1,o.createHand(),o}return r(t,e),s(t,[{key:"createHand",value:function(){this.hand=new Phaser.Sprite(this.game,0,0,"hand"),this.hand.anchor.set(.85,.85),this.hand.angle=-15,this.game.global.windowWidth<this.game.global.windowHeight?(this.hand.scale.x=.18*this.background.width/this.hand.width,this.hand.scale.y=this.hand.scale.x):(this.hand.scale.x=.27*this.background.width/this.hand.width,this.hand.scale.y=this.hand.scale.x),this.add(this.hand),this.handInitialScale=this.hand.scale.x,void 0!==PiecSettings.autoPlay&&1==PiecSettings.autoPlay&&this.handFollowWord(PiecSettings.autoPlayWord)}},{key:"handFollowWord",value:function(e){this.moveHandDuration=450;for(var t=0;t<e.length;t++)0==t?this.moveHandToBeforePress(this.lettersToCookies[e[t]]).onComplete.add(function(){this.pressHand(this.lettersToCookies[e[0]])},this):this.moveHandToWithDelay(this.lettersToCookies[e[t]],900+this.moveHandDuration*t);this.unpressHandAndMoveOutWithDelay(900+this.moveHandDuration*e.length),this.game.time.events.add(900+this.moveHandDuration*e.length,function(){this.onUpTutorial()},this),this.game.time.events.add(900+this.moveHandDuration*e.length+1e3,function(){this.handTutorial=!1,this.inputLocked=!1,this.hand.destroy()},this)}},{key:"pressHand",value:function(e){this.handTutorial=!0;var t=this.game.add.tween(this.hand.scale).to({x:.9*this.handInitialScale,y:.9*this.handInitialScale},650,Phaser.Easing.Quadratic.InOut,!0,0);this.hand.x,this.hand.y;return this.game.add.tween(this.hand).to({angle:[-40,-50,-50]},650,Phaser.Easing.Quadratic.InOut,!0,0),this.game.time.events.add(700,function(){this.onInputDownLetterTutorial(e)},this),t}},{key:"unpressHandAndMoveOutWithDelay",value:function(e){this.game.time.events.add(e,function(){this.game.add.tween(this.hand.scale).to({x:this.handInitialScale,y:this.handInitialScale},400,Phaser.Easing.Quadratic.InOut,!0,0),this.game.add.tween(this.hand).to({angle:-5,x:this.game.global.windowWidth*window.devicePixelRatio*this.scale.x+1.5*this.hand.width},800,Phaser.Easing.Quadratic.InOut,!0,200)},this)}},{key:"moveHandToWithDelay",value:function(e,t){this.game.time.events.add(t,function(){this.moveHandTo(e)},this)}},{key:"moveHandToBeforePress",value:function(e){var t=this.game.add.tween(this.hand).to({x:e.x+.9*this.hand.width,y:e.y+.1*this.hand.height},700,Phaser.Easing.Quadratic.InOut,!0,0);return this.game.add.tween(this.hand).to({angle:-50},700,Phaser.Easing.Quadratic.InOut,!0,0),t}},{key:"moveHandTo",value:function(e){return this.game.add.tween(this.hand).to({x:e.x+this.hand.width,y:e.y+.2*this.hand.height},this.moveHandDuration,Phaser.Easing.Sinusoidal.InOut,!0,0)}},{key:"createBackground",value:function(){var e=this.game.global.windowWidth>this.game.global.windowHeight?"board-background-landscape":"board-background";this.background=new Phaser.Sprite(this.game,0,0,e),this.add(this.background),h.fitInContainer(this,"board-background")}},{key:"initializeLetters",value:function(){for(var e=0;e<this.game.global.loadedLetters.length;e++){console.log("added letter "+this.game.global.loadedLetters[e]);var t=new Phaser.Sprite(this.game,0,0,this.game.global.loadedLetters[e]);t.anchor.set(.5),t.x+=this.background.width*PiecSettings.panAnchor[0],t.y+=this.background.height*PiecSettings.panAnchor[1];var i=360/this.game.global.loadedLetters.length*e,o=this.background.height;this.game.global.windowHeight>this.game.global.windowWidth?o*=PiecSettings.panRadius:o*=PiecSettings.panRadiusLandscape,t.x+=o*Math.cos(i*Math.PI/180),t.y+=o*Math.sin(i*Math.PI/180);var n=20*Math.random()-10;t.angle=n,t.character=this.game.global.loadedLetters[e],t.inputEnabled=!0,t.events.onInputDown.add(this.onInputDownLetter,this),this.lettersToCookies[t.character]=t,t.initialScale=t.scale.x,this.add(t)}}},{key:"updatePath",value:function(){this.graphics.clear(),this.handTutorial,this.bezierCurveRight=!1,this.graphics.lineStyle(20,this.lineColor,1);for(var e,t,i=0;i<this.letters.length;i++){!this.handTutorial||1!=i&&2!=i||(this.bezierCurveRight=!1);var o=this.lettersToCookies[this.letters[i]];0==i?this.graphics.moveTo(o.x,o.y):this.drawLineToPoint(e,t,o.x,o.y),e=o.x,t=o.y}this.wordStarted&&(!this.handTutorial||1!=i&&2!=i||(this.bezierCurveRight=!1),this.drawLineToPoint(e,t,this.mouseX,this.mouseY));for(var i=0;i<this.letters.length;i++){var o=this.lettersToCookies[this.letters[i]];void 0!==PiecSettings.circleLetter&&1==PiecSettings.circleLetter&&(this.graphics.beginFill(this.lineColor,1),this.graphics.drawCircle(o.x,o.y,1.2*o.width))}}},{key:"changePathColor",value:function(e){this.lineColor=e}},{key:"bounceLetters",value:function(e){for(var t=0;t<e.length;t++){var i=this.lettersToCookies[e[t]];if(i){var o=i.initialScale;this.game.add.tween(i.scale).to({x:[1.06*o,.94*o,1.06*o,o],y:[1.06*o,.94*o,1.06*o,o]},1e3,Phaser.Easing.Linear.None,!0,0)}}}},{key:"fadePath",value:function(){this.game.add.tween(this.graphics).to({alpha:0},300,Phaser.Easing.Quadratic.InOut,!0,400).onComplete.add(function(){this.clearPath(),this.graphics.alpha=1,this.inputLocked=!1},this)}},{key:"clearPath",value:function(){this.graphics.clear(),this.letters=""}},{key:"drawStraightPoint",value:function(e,t){this.graphics.lineTo(e,t)}},{key:"drawLineToPoint",value:function(e,t,i,o){"curved"==PiecSettings.connectionLine?this.bezierCurveRight?(this.graphics.bezierCurveTo(e,t,i,t,i,o),this.bezierCurveRight=!1):(this.graphics.bezierCurveTo(e,t,e,o,i,o),this.bezierCurveRight=!0):this.graphics.lineTo(i,o)}},{key:"onUp",value:function(){this.handTutorial||(this.wordStarted=!1,""!=this.letters&&(console.log("on word complete!"),this.game.onWordComplete.dispatch(this.letters),this.inputLocked=!0,this.letters=""))}},{key:"onUpTutorial",value:function(){this.wordStarted=!1,""!=this.letters&&(this.game.onWordComplete.dispatch(this.letters),this.inputLocked=!0)}},{key:"isInputOverLetter",value:function(e,t){for(var i in this.lettersToCookies)if(this.lettersToCookies.hasOwnProperty(i)){var o=this.lettersToCookies[i];if(this.isBetweenValues(e,o.x-o.width/2*1.2,o.x+o.width/2*1.2)&&this.isBetweenValues(t,o.y-o.height/2*1.2,o.y+o.height/2*1.2))return o}return null}},{key:"isBetweenValues",value:function(e,t,i){return e>t&&e<i}},{key:"scaleLetterUp",value:function(e){var t=e.initialScale;this.game.add.tween(e.scale).to({x:1.05*t,y:1.05*t},200,Phaser.Easing.Quadratic.InOut,!0,0)}},{key:"onInputDownLetter",value:function(e){if(this.inputLocked||this.handTutorial)console.log("input locked!");else{this.wordStarted=!0,this.letters+=e.character,this.cookieWord.updateBox(this.letters);var t="0xfffffff";void 0!==PiecSettings.colorPalette&&void 0!==PiecSettings.colorPalette.default&&(t=PiecSettings.colorPalette.default),this.changePathColor(t),this.graphics.alpha=1,this.scaleLetterUp(e)}}},{key:"onInputDownLetterTutorial",value:function(e){if(this.inputLocked)console.log("input locked!");else{this.wordStarted=!0,this.letters+=e.character,this.cookieWord.updateBox(this.letters);var t="0xfffffff";void 0!==PiecSettings.colorPalette&&void 0!==PiecSettings.colorPalette.default&&(t=PiecSettings.colorPalette.default),this.changePathColor(t),this.graphics.alpha=1,this.scaleLetterUp(e)}}},{key:"update",value:function(){this.handTutorial?(this.mouseX=this.hand.x-.9*this.hand.width,this.mouseY=this.hand.y-.4*this.hand.width):(this.mouseX=(this.game.input.x-this.x)/this.scale.x,this.mouseY=(this.game.input.y-this.y)/this.scale.y);var e=this.isInputOverLetter(this.mouseX,this.mouseY);null!=e&&this.wordStarted&&-1==this.letters.indexOf(e.character)&&(this.letters+=e.character,this.cookieWord.updateBox(this.letters),this.scaleLetterUp(e)),this.updatePath()}},{key:"animate",value:function(){this.inputLocked=!0,this.game.global.windowHeight>this.game.global.windowWidth?this.game.add.tween(this).to({x:[-this.width]},1400,Phaser.Easing.Quadratic.InOut,!0,0):this.game.add.tween(this).to({x:[this.game.global.windowWidth*window.devicePixelRatio+this.width]},1400,Phaser.Easing.Quadratic.InOut,!0,0)}}]),t}(Phaser.Group));i.default=u},{"../utils/animations-util":17,"../utils/container-util":18,"../utils/custom-png-sequences-renderer.js":19}],7:[function(e,t,i){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),l=e("../utils/container-util"),h=o(l),c=e("../utils/animations-util"),d=(o(c),e("../utils/custom-png-sequences-renderer.js")),u=(o(d),function(e){function t(e){n(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.letters=[],i.createBox(),h.fitInContainerHeight(i,"cookie-word"),i.initialX=i.x,i.letterWidth=0,i}return r(t,e),s(t,[{key:"createBox",value:function(){this.background=this.game.add.graphics(0,0),this.backgroundColor="0xEBEECC",void 0!==PiecSettings.colorPalette&&void 0!==PiecSettings.colorPalette.wordBoxDefault&&(this.backgroundColor=PiecSettings.colorPalette.wordBoxDefault),this.background.beginFill(this.backgroundColor),this.background.drawRoundedRect(0,0,1,120,90),this.background.alpha=0,this.background.anchor.set(.5),this.add(this.background),this.coloredBox=this.game.add.graphics(0,0),this.add(this.coloredBox)}},{key:"updateBox",value:function(e){this.alpha=1,this.clearLetters();for(var t=0;t<e.length;t++){var i=e[t];PiecSettings.useAlternativeAssetForSolvedLetters&&(i=e[t]+"-2");var o=new Phaser.Sprite(this.game,0,0,i);o.anchor.set(.5,0),this.add(o),o.scale.y=.65*this.background.height/o.height,o.scale.x=o.scale.y,0==t&&(this.letterWidth=o.width),o.y+=.175*this.background.height,o.x=30+this.letterWidth*t+this.letterWidth/2,this.letters.push(o)}this.background.clear(),null!=this.coloredBox&&this.coloredBox.clear(),this.background.beginFill(this.backgroundColor),this.background.drawRoundedRect(0,0,60+e.length*this.letterWidth,120,90),this.background.alpha=.95,this.background.anchor.set(.5),this.x=this.initialX-this.width/2}},{key:"fadeBox",value:function(){this.game.add.tween(this).to({alpha:0},700,Phaser.Easing.Quadratic.InOut,!0,0).onComplete.add(function(){this.clearLetters()},this)}},{key:"clearLetters",value:function(){for(var e=0;e<this.letters.length;e++)this.letters[e].destroy();this.letters=[]}},{key:"colorBox",value:function(e,t){console.log("coloring box"),this.coloredBox.clear(),this.coloredBox.beginFill(t),this.coloredBox.drawRoundedRect(0,0,60+e.length*this.letterWidth,120,90),this.coloredBox.anchor.set(.5),this.coloredBox.alpha=0,this.game.add.tween(this.coloredBox).to({alpha:.7},300,Phaser.Easing.Quadratic.InOut,!0,0)}}]),t}(Phaser.Group));i.default=u},{"../utils/animations-util":17,"../utils/container-util":18,"../utils/custom-png-sequences-renderer.js":19}],8:[function(e,t,i){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),l=e("../utils/container-util"),h=o(l),c=e("../utils/animations-util"),d=o(c),u=e("../utils/custom-png-sequences-renderer.js"),g=(o(u),function(e){function t(e,i,o,r){n(this,t);var s=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return s.ctaLayer=i,s.winMessage=o,s.logo=r,s.fxLayer=new Phaser.Group(s.game),s.button=new Phaser.Sprite(s.game,0,0,"cta",0),s.initialCtaWidth=s.button.width,s.button.anchor.set(.5,.5),h.fitInContainer(s.button,"cta-container"),s.ctaLayer.add(s.button),s.button.bringToTop(),s.game.world.bringToTop(s.ctaLayer),s.button.x+=s.button.width/2,s.button.y+=s.button.height/2,s.button.inputEnabled=!0,s.button.input.useHandCursor=!0,s.button.events.onInputDown.add(function(){doSomething("download")}),s}return r(t,e),s(t,[{key:"createTip",value:function(){this.tip=new Phaser.Sprite(this.game,0,0,"tip"),this.tip.anchor.set(.5),this.add(this.tip),this.tip.scale.x=.67*this.background.width/this.tip.width,this.tip.scale.y=this.tip.scale.x,this.tip.y=this.button.y+.2*this.button.height,this.tip.x=this.button.x+this.tip.width/2-.25*this.button.width}},{key:"showTip",value:function(){var e=this.tip.y;this.game.add.tween(this.tip).to({y:e-this.button.height},700,Phaser.Easing.Quadratic.InOut,!0,0),this.game.time.events.add(2500,function(){this.game.add.tween(this.tip).to({y:e},700,Phaser.Easing.Quadratic.InOut,!0,0)},this)}},{key:"createBackground",value:function(){var e=document.getElementById("cta-background"),t=e.offsetWidth*window.devicePixelRatio,i=e.offsetHeight*window.devicePixelRatio,o=e.getBoundingClientRect().left*window.devicePixelRatio,n=e.getBoundingClientRect().top*window.devicePixelRatio,a=new Phaser.BitmapData(this.game,"myBitmap",t,i),r=a.context.createLinearGradient(0,0,0,i);r.addColorStop(0,"#4835c4"),r.addColorStop(.1,"#412cad"),r.addColorStop(.5,"#362288"),r.addColorStop(1,"#362288"),a.context.fillStyle=r,a.context.fillRect(0,0,t,i),this.background=this.game.add.sprite(o,n,a,null,this),console.log(this.x+", "+this.y)}},{key:"fitInContainer",value:function(){this.container=document.getElementById("cta-container"),this.containerWidth=this.container.offsetWidth*window.devicePixelRatio,this.containerHeight=this.container.offsetHeight*window.devicePixelRatio;var e=this.container.getBoundingClientRect().left*window.devicePixelRatio,t=this.container.getBoundingClientRect().top*window.devicePixelRatio;this.x=e,this.y=t,this.scale.x=this.containerWidth/this.button.width,this.scale.y=this.scale.x}},{key:"animate",value:function(){var e=document.getElementById("cta-container-final"),t=e.offsetWidth*window.devicePixelRatio,i=e.getBoundingClientRect().left*window.devicePixelRatio,o=e.getBoundingClientRect().top*window.devicePixelRatio;console.log(t);var n=t/this.initialCtaWidth,a=this.button.scale.x;this.game.add.tween(this.button).to({x:i+this.button.width/a*n/2,y:o+this.button.height/a*n/2},1100,Phaser.Easing.Back.Out,!0,0),this.game.add.tween(this.button.scale).to({x:n,y:n},900,Phaser.Easing.Quadratic.InOut,!0,0);this.spawnCookies(),this.game.time.events.add(1100,function(){this.startPulseIdleAnimation()},this)}},{key:"startPulseIdleAnimation",value:function(){this.buttonOver=new Phaser.Sprite(this.game,0,0,"cta-2"),this.buttonOver.anchor.set(.5,.5),this.buttonOver.x=this.button.x,this.buttonOver.y=this.button.y,this.buttonOver.scale.x=this.button.width/this.buttonOver.width,this.buttonOver.scale.y=this.buttonOver.scale.x,this.ctaLayer.add(this.buttonOver),this.buttonOver.alpha=0;var e=this.buttonOver.scale.x,t=this.game.add.tween(this.buttonOver).to({alpha:1},600,Phaser.Easing.Quadratic.InOut,!0,600).loop().yoyo(!0,0);this.game.add.tween(this.buttonOver.scale).to({x:1.05*e,y:1.05*e},600,Phaser.Easing.Quadratic.InOut,!0,600).loop().yoyo(!0,0),this.game.add.tween(this.button.scale).to({x:1.05*e,y:1.05*e},600,Phaser.Easing.Quadratic.InOut,!0,600).loop().yoyo(!0,0),this.game.time.events.add(200,function(){this.spawnCookies()},this),t.onLoop.add(function(){this.game.time.events.add(200,function(){this.spawnCookies()},this)},this)}},{key:"createCtaArrow",value:function(){if(this.game.global.windowWidth>this.game.global.windowHeight){var e=this.game.add.sprite(0,0,"arrow-landscape");e.scale.x=this.width/e.width*.7,e.scale.y=e.scale.x,e.x=this.x-this.width-e.width/3,e.y=this.y+this.height/2-e.height/2;this.game.add.tween(e).to({x:e.x+.1*e.width},700,Phaser.Easing.Quadratic.Out,!0,0,0,!0).loop()}else{var e=this.game.add.sprite(0,0,"arrow-portrait");e.scale.x=this.width/e.width*.45,e.scale.y=e.scale.x,e.x=this.x+this.width/2-e.width/2,e.y=this.y-this.height-e.height/1.9;this.game.add.tween(e).to({y:e.y+.1*e.height},700,Phaser.Easing.Quadratic.Out,!0,0,0,!0).loop()}}},{key:"solveWordOnCta",value:function(){this.button.loadTexture("cta",0,!1)}},{key:"spawnStars",value:function(){for(var e=0;e<30;e++){var t=new Phaser.Sprite(this.game,0,0,"star-particle");this.fxLayer.add(t),t.anchor.set(.5),t.scale.x=this.button.width/t.width*(.4*Math.random()),t.scale.y=t.scale.x,t.x=this.button.x+Math.random()*this.button.width/2*(Math.random()>.5?1:-1),t.y=this.button.y,t.alpha=0;var i=t.scale.x,o=t.y,n=t.x,a=.3;this.game.global.windowWidth>this.game.global.windowHeight?a=.75:this.game.global.windowWidth>=768&&(a=.5);var r=n+this.button.width*a*(Math.random()>.5?1:-1),s=7.25;this.game.global.windowWidth>this.game.global.windowHeight?(s=4.25,this.game.global.windowWidth>=768&&(s=6)):this.game.global.windowWidth>=768&&(s=9);var l=o-Math.random()*this.button.height*s,h=i*Math.random(),c=5*e+600,u=1200*Math.random()+2e3;d.starFloatWithDelayCustom2(this.game,t,r,l,h,u,c,Phaser.Easing.Quadratic.Out)}this.game.world.bringToTop(this.fxLayer),this.game.world.bringToTop(this.ctaLayer),this.game.world.bringToTop(this.winMessage),this.game.world.bringToTop(this.logo)}},{key:"spawnCookies",value:function(){for(var e=0;e<4;e++){var t=new Phaser.Sprite(this.game,0,0,"star-cookie");t.scale.x=.15*this.button.width*(.25*Math.random()+.5)/t.width,t.scale.y=t.scale.x,t.anchor.set(.5),t.x=this.game.global.windowWidth*Math.random()*window.devicePixelRatio,t.y=this.game.global.windowHeight*Math.random()*window.devicePixelRatio,t.angle=90*Math.random()-45;d.spawnAndDissapear(this.game,t,800+100*Math.random(),800*e,4e3+1e3*Math.random(),Phaser.Easing.Quadratic.InOut),this.fxLayer.add(t)}}},{key:"showDecos",value:function(){var e=new Phaser.Sprite(this.game,0,0,"deco1");this.add(e);var t=new Phaser.Sprite(this.game,0,0,"deco2");this.add(t);var i=new Phaser.Sprite(this.game,0,0,"deco3");this.add(i),h.fitInContainer(e,"deco-01"),h.fitInContainer(t,"deco-02"),h.fitInContainer(i,"deco-03");var o=e.y,n=t.x,a=i.x;e.y-=e.height,t.x+=t.width,i.x-=i.width,this.game.add.tween(e).to({y:o},1e3,Phaser.Easing.Quadratic.InOut,!0,0),this.game.add.tween(t).to({x:n},1100,Phaser.Easing.Quadratic.InOut,!0,0),this.game.add.tween(i).to({x:a},1200,Phaser.Easing.Quadratic.InOut,!0,0)}}]),t}(Phaser.Group));i.default=g},{"../utils/animations-util":17,"../utils/container-util":18,"../utils/custom-png-sequences-renderer.js":19}],9:[function(e,t,i){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),s=function(e){function t(e){o(this,t);var i=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.graphics=e.add.graphics(0,0),null!=PiecSettings.finalOverlay&&null!=PiecSettings.finalOverlay.color?i.graphics.beginFill(PiecSettings.finalOverlay.color,1):i.graphics.beginFill(0,1),i.graphics.drawRect(0,0,i.game.global.windowWidth*window.devicePixelRatio,i.game.global.windowHeight*window.devicePixelRatio),i.add(i.graphics),null!=PiecSettings.finalOverlay&&null!=PiecSettings.finalOverlay.alpha?i.finalAlpha=PiecSettings.finalOverlay.alpha:i.finalAlpha=.4,i.alpha=i.finalAlpha,i.alpha=0,i}return a(t,e),r(t,[{key:"show",value:function(){this.game.add.tween(this).to({alpha:this.finalAlpha},500,Phaser.Easing.Sinusoidal.In,!0,200)}},{key:"hide",value:function(){if(this.alpha>0){this.game.add.tween(this).to({alpha:0},300,Phaser.Easing.Quadratic.In,!0,0)}}}]),t}(Phaser.Group);i.default=s},{}],10:[function(e,t,i){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),s=e("../utils/container-util"),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(s),h=function(e){function t(e,i){o(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.wordGrid=i,a.createButton(),a}return a(t,e),r(t,[{key:"createButton",value:function(){this.button=new Phaser.Sprite(this.game,0,0,"hint-button"),this.add(this.button),this.button.inputEnabled=!0,this.button.input.useHandCursor=!0,this.button.events.onInputDown.add(function(){this.wordGrid.highlightNextWord()},this),l.fitInContainer(this,"hint-button")}},{key:"animate",value:function(){this.game.add.tween(this).to({alpha:0},200,Phaser.Easing.Quadratic.InOut,!0,0)}}]),t}(Phaser.Group);i.default=h},{"../utils/container-util":18}],11:[function(e,t,i){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),s=e("../utils/container-util"),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(s),h=function(e){function t(e,i){o(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.logo=new Phaser.Sprite(a.game,0,0,"logo"),a.logo.anchor.set(.5),
a.add(a.logo),a.logo.alpha=0,l.fitInContainerAnchorAtCenter(a.logo,"logo"),a}return a(t,e),r(t,[{key:"animate",value:function(){this.logo.alpha=1;var e=this.logo.scale.x,t=this.logo.y;this.logo.scale.x=.01,this.logo.scale.y=.01,this.game.add.tween(this.logo.scale).to({x:e,y:e},1e3,Phaser.Easing.Back.Out,!0,0),this.logo.y+=200,this.game.add.tween(this.logo).to({y:t},600,Phaser.Easing.Quadratic.Out,!0,0)}}]),t}(Phaser.Group);i.default=h},{"../utils/container-util":18}],12:[function(e,t,i){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),l=e("../utils/util"),h=(o(l),e("../utils/container-util")),c=o(h),d=e("../utils/custom-png-sequences-renderer.js"),u=(o(d),function(e){function t(e){return n(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return r(t,e),s(t,[{key:"showWinMessage",value:function(){this.winMessage=new Phaser.Sprite(this.game,0,0,"puzzle-solved"),this.winMessage.angle=10,this.winMessage.anchor.set(.5,.5),this.add(this.winMessage),c.fitInContainerAnchorAtCenter(this.winMessage,"win-message");var e=this.winMessage.scale.x;this.game.add.tween(this.winMessage).to({angle:0},600,Phaser.Easing.Back.Out,!0,200),this.winMessage.scale.x=.01*e,this.winMessage.scale.y=.01*e,this.game.add.tween(this.winMessage.scale).to({x:e,y:e},500,Phaser.Easing.Back.Out,!0,0),this.game.time.events.add(900,function(){this.game.add.tween(this.winMessage.scale).to({x:3*e,y:3*e},500,Phaser.Easing.Back.In,!0,0),this.game.add.tween(this.winMessage).to({alpha:[1,0],angle:-10},500,Phaser.Easing.Back.In,!0,0)},this)}}]),t}(Phaser.Group));i.default=u},{"../utils/container-util":18,"../utils/custom-png-sequences-renderer.js":19,"../utils/util":20}],13:[function(e,t,i){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),l=e("../utils/container-util"),h=o(l),c=e("../utils/animations-util"),d=o(c),u=e("../utils/custom-png-sequences-renderer.js"),g=o(u),f=function(e){function t(e,i){n(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.cta=i,o.game.global.inputLocked=!1,o.background=new Phaser.Sprite(e,0,0,"letters-background"),o.add(o.background),o.coordsToBoxCookie=[],o.wordsToBoxCookies=[],o.createWords(),o.preFillWords(),h.fitInContainer(o,"tiles-area"),o.fxLayer=new Phaser.Group(o.game),o.game.world.bringToTop(o.fxLayer),o.fxLayer.x=o.x,o.fxLayer.y=o.y,o.fxLayer.scale.x=o.scale.x,o.fxLayer.scale.y=o.scale.y,console.log(o.wordsToBoxCookies),o.completedWords=0,o}return r(t,e),s(t,[{key:"highlightNextWord",value:function(){var e=this.getNextUnsolvedWord();console.log(e);for(var t=this.wordsToBoxCookies[e],i=0;i<t.length;i++)if(t[i].letter.alpha<1){this.game.add.tween(t[i].letter).to({alpha:.4},400,Phaser.Easing.Quadratic.InOut,!0,0);var o=t[i].initialLetterScale;this.game.add.tween(t[i].letter.scale).to({x:[1.25*o,o],y:[1.25*o,o]},600,Phaser.Easing.Quadratic.InOut,!0,0)}}},{key:"getNextUnsolvedWord",value:function(){for(var e in this.wordsToBoxCookies)if(this.wordsToBoxCookies.hasOwnProperty(e))for(var t=this.wordsToBoxCookies[e],i=0;i<t.length;i++)if(!t[i].revealed)return e;return!1}},{key:"createWords",value:function(){this.accrossWords=this.createWordsAccross(),this.downWords=this.createWordsDown()}},{key:"preFillWords",value:function(){for(var e=0;e<PiecSettings.preFilledWords.length;e++)if(this.wordsToBoxCookies[PiecSettings.preFilledWords[e]])for(var t=this.wordsToBoxCookies[PiecSettings.preFilledWords[e]],i=0;i<t.length;i++)this.revealBoxCookieNoAnimation(t[i])}},{key:"createWordsAccross",value:function(){for(var e=[],t=0;t<PiecSettings.words.accross.length;t++){var i=PiecSettings.words.accross[t][0],o=PiecSettings.words.accross[t][1],n=PiecSettings.words.accross[t][2];e[t]=this.createAccrossWord(n,i,o)}return e}},{key:"createWordsDown",value:function(){for(var e=[],t=0;t<PiecSettings.words.down.length;t++){var i=PiecSettings.words.down[t][0],o=PiecSettings.words.down[t][1],n=PiecSettings.words.down[t][2];e[t]=this.createDownWord(n,i,o)}return e}},{key:"createAccrossWord",value:function(e,t,i){for(var o=[],n=0;n<e.length;n++){var a=e[n],r=new Phaser.Sprite(this.game,0,0,"box-cookie-empty");r.anchor.set(.5),this.scaleBoxCookie(r),r.x=n*r.width+t*r.width+r.width/2,r.y=i*r.height+r.height/2,this.centerBoxCookieVertAndHor(r),this.add(r),this.addLetterToBoxCookie(r,a),o[n]=r,this.coordsToBoxCookie[t+n+","+i]=r,this.isPreFilled(t+n,i)&&this.revealBoxCookieNoAnimation(r)}return this.wordsToBoxCookies[e]=o,o}},{key:"addLetterToBoxCookie",value:function(e,t){PiecSettings.useAlternativeAssetForSolvedLetters&&(t+="-2");var i=new Phaser.Sprite(this.game,0,0,t);i.anchor.set(.5);var o=.75;void 0!==PiecSettings.letterScaleInBoxCookie&&(o=PiecSettings.letterScaleInBoxCookie),i.scale.x=e.width/i.width*o,i.scale.y=i.scale.x,i.x=e.x,i.y=e.y,i.alpha=0,this.add(i),e.letter=i,e.revealed=!1,e.initialLetterScale=i.scale.x}},{key:"evaluateWord",value:function(e){return this.wordsToBoxCookies[e]?this.hasWordBeenRevealed(e)?"repeated":(this.revealWord(e),this.completedWords++,"correct"):"incorrect"}},{key:"allLettersRevealed",value:function(){for(var e in this.coordsToBoxCookie)if(this.coordsToBoxCookie.hasOwnProperty(e)){var t=this.coordsToBoxCookie[e];if(!t.revealed)return!1}return!0}},{key:"revealWord",value:function(e){for(var t=this.wordsToBoxCookies[e],i=0;i<t.length;i++)this.revealBoxCookieWithDelay(t[i],170*i)}},{key:"hasWordBeenRevealed",value:function(e){for(var t=this.wordsToBoxCookies[e],i=0;i<t.length;i++)if(1!=t[i].letter.alpha)return!1;return!0}},{key:"revealBoxCookieWithDelay",value:function(e,t){e.revealed=!0,this.game.time.events.add(t+300,function(){this.spawnStars(e)},this),this.game.time.events.add(t,function(){this.game.time.events.add(20,function(){this.revealBoxCookieNoAnimation(e)},this);var t=e.scale.x,i=(this.game.add.tween(e.scale).to({x:[1.7*t,.8*t,t,t],y:[1.7*t,.8*t,t,t]},1500,Phaser.Easing.Quadratic.Out,!0,0),e.letter.scale.x);this.game.add.tween(e.letter.scale).to({x:[1.7*i,.8*i,i,i],y:[1.7*i,.8*i,i,i]},1500,Phaser.Easing.Quadratic.Out,!0,0)},this)}},{key:"revealBoxCookieNoAnimation",value:function(e){e.revealed=!0,e.letter.alpha=1,e.loadTexture("box-cookie-full",!1,0)}},{key:"createDownWord",value:function(e,t,i){for(var o=[],n=0;n<e.length;n++){var a=this.coordsToBoxCookie[t+","+(i+n)];if(a)o[n]=a;else{var r=e[n],s=new Phaser.Sprite(this.game,0,0,"box-cookie-empty");s.anchor.set(.5),this.scaleBoxCookie(s),s.x=t*s.width+s.width/2,s.y=i*s.height+n*s.height+s.height/2,this.centerBoxCookieVertAndHor(s),this.add(s),this.addLetterToBoxCookie(s,r),o[n]=s,this.coordsToBoxCookie[t+","+(i+n)]=s,console.log("COOKIE at ("+t+", "+(i+n)+") - "+r),this.isPreFilled(t,i+n)&&(s.letter.alpha=1,s.loadTexture("box-cookie-full",!1,0))}}return this.wordsToBoxCookies[e]=o,o}},{key:"isPreFilled",value:function(e,t){for(var i=0;i<PiecSettings.preFilledLettersCoordinates.length;i++)if(e==PiecSettings.preFilledLettersCoordinates[i][0]&&t==PiecSettings.preFilledLettersCoordinates[i][1])return!0}},{key:"scaleBoxCookie",value:function(e){e.scale.x=.85*this.width/PiecSettings.wordsGridWidth/e.width,e.scale.y=e.scale.x}},{key:"centerBoxCookieVertAndHor",value:function(e){e.x+=(this.width-e.width*PiecSettings.wordsGridWidth)/2,e.y+=(this.background.height-e.height*PiecSettings.wordsGridHeight)/2,e.x-=this.background.width*(.5-PiecSettings.boardAnchor[0])/2,e.y-=this.background.height*(.5-PiecSettings.boardAnchor[1])/2}},{key:"playAnimationOnWord",value:function(e,t){for(var i=0;i<PiecSettings.words[e].length;i++){var o=this.words[e][i];if(i==t){var n=g.playPngSequence(this.game,PiecSettings.pngAnimations[0],this.fxLayer);n.anchor.set(.5),n.scale.x=o.letterBackground.width/n.width*3,n.scale.y=n.scale.x,n.x=o.x+o.letterBackground.width/2,n.y=o.y+o.letterBackground.height/2,o.letterText.alpha=1}else this.burstBlueWithDelay(o,150*Math.abs(t-i)+500)}}},{key:"playRedAnimationOnWord",value:function(e,t){for(var i=0;i<PiecSettings.words[e].length;i++){var o=this.words[e][i];this.turnLetterRedWithDelay(o,50*Math.abs(t-i)+300),this.removeRedFromLetterWithDelay(o,50*Math.abs(t-i)+300+800),this.deleteLetter(o,1e3)}this.game.time.events.add(1500,function(){this.moveCursorToBeginningOfWord(e),this.game.global.inputLocked=!1},this)}},{key:"turnLetterRedWithDelay",value:function(e,t){this.game.time.events.add(t,function(){e.letterBackground.loadTexture("tile-wrong",0,!1),"?"==PiecSettings.wordsLettersMissing[e.xCoord][e.yCoord]&&(e.letterText.fill="#9D9CC7",e.letterText.alpha=1)},this)}},{key:"removeRedFromLetterWithDelay",value:function(e,t){this.game.time.events.add(t,function(){e.letterBackground.loadTexture(this.getTileImage(e.xCoord,e.yCoord),0,!1)},this)}},{key:"deleteLetter",value:function(e,t){this.game.time.events.add(t,function(){"?"==PiecSettings.wordsLettersMissing[e.xCoord][e.yCoord]&&(e.letterText.text="")},this)}},{key:"burstWithDelayOnPosition",value:function(e,t,i,o,n){this.game.time.events.add(e,function(){var e=g.playPngSequence(this.game,t,this.fxLayer);e.anchor.set(.5),e.scale.x=n,e.scale.y=n,e.x=i,e.y=o},this),this.game.world.bringToTop(this.fxLayer)}},{key:"burstWithDelay",value:function(e,t,i){this.game.time.events.add(t,function(){var o=g.playPngSequence(this.game,i,this.fxLayer);o.anchor.set(.5),o.scale.x=e.letterBackground.width/o.width*3.65,o.scale.y=o.scale.x,o.x=e.x+e.letterBackground.width/2,o.y=e.y+e.letterBackground.height/2,this.game.time.events.add(t/2,function(){e.letterText.alpha=1},this)},this)}},{key:"burstBlueWithDelay",value:function(e,t){this.burstWithDelay(e,t,PiecSettings.pngAnimations[1])}},{key:"burstYellowWithDelay",value:function(e,t){this.burstWithDelay(e,t,PiecSettings.pngAnimations[2])}},{key:"danceVerticalLetters",value:function(){for(var e=0;e<this.words.length;e++)for(var t=0;t<this.words[e].length;t++)if("#"==PiecSettings.wordsColoring[e][t]){var i=this.words[e][t];this.danceLetter(i.letterText,1e3),this.burstWithDelay(i,150*Math.abs(Math.round((this.words.length-1)/2)-e)+500,PiecSettings.pngAnimations[2])}}},{key:"flyVerticalLetters",value:function(){for(var e=0,t=0;t<this.words.length;t++){for(var i=0;i<this.words[t].length;i++)if("#"==PiecSettings.wordsColoring[t][i]){var o=this.words[t][i],n=this.cta.button.x-this.cta.button.width/2+.1*this.cta.button.width+.1*this.cta.button.width*(e+1),a=this.cta.button.y-o.height/4;this.flyLetterWithDelay(o,n,a,50*e);this.burstWithDelayOnPosition(800+50*e,PiecSettings.pngAnimations[1],n,a,2.5)}e++}}},{key:"spawnStarsOnVerticalWord",value:function(){for(var e=0;e<this.words.length;e++)for(var t=0;t<this.words[e].length;t++)"#"==PiecSettings.wordsColoring[e][t]&&this.spawnStars(this.words[e][t])}},{key:"danceLetter",value:function(e,t){this.game.add.tween(e).to({angle:[-10,10,-10,0]},t,Phaser.Easing.Quadratic.InOut,!0,0)}},{key:"flyLetterWithDelay",value:function(e,t,i,o){this.game.time.events.add(o,function(){this.flyLetter(e,t,i)},this)}},{key:"flyLetter",value:function(e,t,i){var o=new Phaser.Group(this.game),n=new Phaser.Sprite(this.game,0,0,this.getTileImage(e.xCoord,e.yCoord));n.scale.x=e.letterBackground.scale.x,n.scale.y=e.letterBackground.scale.y,n.x=e.letterBackground.x,n.y=e.letterBackground.y,o.add(n),o.x=e.x,o.y=e.y;var a={font:this.fontSize+"px "+PiecSettings.fontFamily},r=new Phaser.Text(this.game,0,0,"?"==PiecSettings.wordsLettersMissing[e.xCoord][e.yCoord]?" ":PiecSettings.words[e.xCoord][e.yCoord],a);r.anchor.set(.5),r.fill="#001b80",r.x=e.letterText.x,r.y=e.letterText.y,r.scale.x=e.letterText.scale.x,r.scale.y=e.letterText.scale.y,o.add(r),this.game.world.bringToTop(o),this.game.world.bringToTop(this.fxLayer);var s=o.scale.x,l=this.game.add.tween(o).to({x:t,y:i},1e3,Phaser.Easing.Quadratic.InOut,!0,0);this.game.add.tween(o.scale).to({x:.5*s,y:.5*s},1e3,Phaser.Easing.Quadratic.InOut,!0,0),l.onComplete.add(function(){o.destroy()},this)}},{key:"playAnimationOnBoard",value:function(){for(var e=0;e<this.words.length;e++)for(var t=0;t<this.words[e].length;t++){var i=this.words[e][t];"#"!=PiecSettings.wordsColoring[e][t]?this.burstYellowWithDelay(i,150*e+150*t):this.raiseLetter(i)}}},{key:"raiseLetter",value:function(e){this.game.world.bringToTop(e);var t=e.letterBackground.x,i=e.letterBackground.y,o=e.letterBackground.scale.x,n=e.letterBackground.width,a=e.letterBackground.height;this.game.add.tween(e.letterBackground.scale).to({x:1.1*o,y:1.1*o},1e3,Phaser.Easing.Quadratic.InOut,!0),this.game.add.tween(e.letterBackground).to({x:t+n/2-1.1*n/2,y:i+a/2-1.1*a/2-(3-e.xCoord)*a*.07},1e3,Phaser.Easing.Quadratic.InOut,!0);var r=(e.letterText.x,e.letterText.y,e.letterText.scale.x);e.letterText.width,e.letterText.height;this.game.add.tween(e.letterText.scale).to({x:1.1*r,y:1.1*r},1e3,Phaser.Easing.Quadratic.InOut,!0),this.game.add.tween(e.letterText).to({x:t+n/2-1.1*n/2+1.1*n/2,y:i+a/2-1.1*a/2-(3-e.xCoord)*a*.07+1.1*a/2},1e3,Phaser.Easing.Quadratic.InOut,!0)}},{key:"spawnStars",value:function(e){for(var t=0;t<20;t++){var i=Math.random()>.4?"star-particle":"spark-particle",o=new Phaser.Sprite(this.game,0,0,i);this.fxLayer.add(o),o.anchor.set(.5),o.scale.x=.45*e.width/o.width*Math.random(),o.scale.y=o.scale.x,o.x=e.x,o.y=e.y,o.alpha=0;var n=o.scale.x,a=o.y,r=o.x,s=360*Math.random(),l=.75*(e.width+e.width*Math.random()),h=l*Math.cos(s*Math.PI/180)+r,c=l*Math.sin(s*Math.PI/180)+a,u=n*Math.random(),g=10*t,f=300*Math.random()+800;d.starFloatWithDelay(this.game,o,h,c,u,f,g)}}},{key:"animate",value:function(){this.y;this.game.add.tween(this).to({y:1.1*-this.height},1200,Phaser.Easing.Quadratic.InOut,!0,200)}}]),t}(Phaser.Group);i.default=f},{"../utils/animations-util":17,"../utils/container-util":18,"../utils/custom-png-sequences-renderer.js":19}],14:[function(e,t,i){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),s=function(e){function t(){return o(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return a(t,e),r(t,[{key:"preload",value:function(){}},{key:"init",value:function(){PiecSettings.assetsDir="dev"===PiecSettings.env?"assets/":"";var e=this.game;e.onGameComplete=new Phaser.Signal,e.onCompleteLevel=new Phaser.Signal,e.onGridComplete=new Phaser.Signal,e.onWordComplete=new Phaser.Signal,e.onBoardComplete=new Phaser.Signal,"undefined"!=typeof piec&&(piec.lockGame=function(){e.global.locked=!0},piec.unlockGame=function(){e.global.locked=!1},piec.completeLevel=function(){e.onCompleteLevel.dispatch()},piec.destroyGame=function(){e.destroy()}),window.onresize=function(){e.scale.setGameSize(document.body.clientWidth*window.devicePixelRatio,document.body.clientHeight*window.devicePixelRatio),e.scale.refresh(),e.state.start("boot",!0,!1)}}},{key:"create",value:function(){this.init(),this.game.input.maxPointers=1,this.initGlobalVariables(),this.game.state.start("preloader"),this.game.onMoveStart=function(e){e.global.interactions++,PiecSettings&&PiecSettings.onMoveStart&&PiecSettings.onMoveStart(e.global.interactions)},this.game.onMoveComplete=function(e){PiecSettings&&PiecSettings.onMoveComplete&&PiecSettings.onMoveComplete(e.global.moveStats)}}},{key:"initGlobalVariables",value:function(){this.game.global={interaction:0,reelsSpinCompleted:0,isComplete:!1}}}]),t}(Phaser.State);i.default=s},{}],15:[function(e,t,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),l=e("../prefabs/logo"),h=o(l),c=e("../prefabs/dark-overlay"),d=o(c),u=e("../prefabs/background"),g=o(u),f=e("../prefabs/cta-button"),p=o(f),w=e("../prefabs/win-message"),m=o(w),y=e("../prefabs/word-grid"),v=o(y),b=e("../prefabs/cookie-pan"),x=o(b),P=e("../prefabs/cookie-word"),k=o(P),S=e("../prefabs/hint-button"),O=o(S),C=e("../utils/custom-png-sequences-renderer.js"),_=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);t.default=e}(C),function(e){function t(){return n(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return r(t,e),s(t,[{key:"create",value:function(){this.game.scale.scaleMode=Phaser.ScaleManager.USER_SCALE,this.game.scale.setUserScale(1/window.devicePixelRatio,1/window.devicePixelRatio,0,0),this.game.global.windowWidth=document.body.clientWidth,this.game.global.windowHeight=document.body.clientHeight,this.background=new g.default(this.game),this.game.add.existing(this.background),this.game.onWordComplete.add(this.onWordComplete,this),this.game.onBoardComplete.add(this.onBoardComplete,this),this.ctaLayer=new Phaser.Group(this.game),this.game.add.existing(this.ctaLayer),this.winMessage=new m.default(this.game),this.game.add.existing(this.winMessage),this.logo=new h.default(this.game),this.game.add.existing(this.logo),this.cta=new p.default(this.game,this.ctaLayer,this.winMessage,this.logo),this.game.add.existing(this.cta),this.cookieWord=new k.default(this.game),this.game.add.existing(this.cookieWord),this.wordGrid=new v.default(this.game,this.cta),this.game.add.existing(this.wordGrid),this.cookiePan=new x.default(this.game,this.cookieWord),this.game.add.existing(this.cookiePan),this.tooltipLayer=this.game.add.group(),this.hintButton=new O.default(this.game,this.wordGrid),this.game.add.existing(this.hintButton),this.game.world.bringToTop(this.cta),this.game.world.bringToTop(this.ctaLayer),this.game.world.bringToTop(this.cookieWord),this.game.world.bringToTop(this.winMessage),this.game.world.bringToTop(this.logo),this.darkOverlay=new d.default(this.game),this.game.add.existing(this.darkOverlay),this.game.world.bringToTop(this.tooltipLayer),this.game.global.tutorialCanceled=!1,void 0!==PiecSettings.timer&&this.game.time.events.add(4e3,function(){document.getElementById("vungle-close").className="visible"},this)}},{key:"resize",value:function(){}},{key:"render",value:function(){}},{key:"onGridComplete",value:function(){this.cta.solveWordOnCta(),this.game.world.bringToTop(this.darkOverlay),this.game.world.bringToTop(this.winMessage),this.game.world.bringToTop(this.logo),this.game.world.bringToTop(this.ctaLayer),this.game.world.bringToTop(this.wordGrid.fxLayer),this.game.time.events.add(900,function(){this.winMessage.showWinMessage(),this.darkOverlay.show(),this.cta.animate()},this)}},{key:"onWordComplete",value:function(e){var t=this.wordGrid.evaluateWord(e);if("correct"==t){console.log("correct word!");var i="0x44AD12";void 0!==PiecSettings.colorPalette&&void 0!==PiecSettings.colorPalette.correct&&(i=PiecSettings.colorPalette.correct),this.cookiePan.changePathColor(i),this.cookiePan.fadePath(),this.cookiePan.bounceLetters(e),this.cookieWord.colorBox(e,i),this.cookieWord.fadeBox(),this.wordGrid.allLettersRevealed()&&this.game.onBoardComplete.dispatch()}else if("incorrect"==t){var i="0xe3442d";void 0!==PiecSettings.colorPalette&&void 0!==PiecSettings.colorPalette.incorrect&&(i=PiecSettings.colorPalette.incorrect),console.log("incorrect word!"),this.cookiePan.changePathColor(i),this.cookiePan.fadePath(),this.cookieWord.colorBox(e,i),this.cookieWord.fadeBox()}else if("repeated"==t){var i="0xf6a200";void 0!==PiecSettings.colorPalette&&void 0!==PiecSettings.colorPalette.repeated&&(i=PiecSettings.colorPalette.repeated),console.log("repeated word"),this.cookiePan.changePathColor(i),this.cookiePan.fadePath(),this.cookieWord.colorBox(e,i),this.cookieWord.fadeBox()}}},{key:"onBoardComplete",value:function(){this.hintButton.animate(),this.game.time.events.add(800,function(){this.wordGrid.animate(),this.cookiePan.animate(),this.game.time.events.add(400,function(){this.cta.showDecos()},this),this.game.time.events.add(1e3,function(){this.cta.animate(),this.game.time.events.add(200,function(){this.logo.animate()},this),void 0!==PiecSettings.asoi&&1==PiecSettings.asoi&&this.game.time.events.add(1e3,function(){doSomething("download")},this)},this)},this),this.game.time.events.add(600,function(){this.winMessage.showWinMessage()},this)}}]),t}(Phaser.State));i.default=_},{"../prefabs/background":5,"../prefabs/cookie-pan":6,"../prefabs/cookie-word":7,"../prefabs/cta-button":8,"../prefabs/dark-overlay":9,"../prefabs/hint-button":10,"../prefabs/logo":11,"../prefabs/win-message":12,"../prefabs/word-grid":13,"../utils/custom-png-sequences-renderer.js":19}],16:[function(e,t,i){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}(),l=e("../atlas/index"),h=(o(l),e("../utils/util")),c=(o(h),e("../animations.js")),d=(o(c),e("../utils/custom-png-sequences-renderer.js")),u=o(d),g=function(e){function t(){n(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.asset=null,e}return r(t,e),s(t,[{key:"preload",value:function(){this.load.onLoadComplete.addOnce(this.onLoadComplete,this),this.loadResources(),u.preloadPngSequences(this.game)}},{key:"update",value:function(){}},{key:"loadResources",value:function(){this.game.load.image("logo",PiecSettings.assetsDir+"logo.png"),this.game.load.image("background",PiecSettings.assetsDir+"bg.jpg"),this.game.global.loadedLetters="";for(var e=0;e<PiecSettings.words.accross.length;e++)for(var t=0;t<PiecSettings.words.accross[e][2].length;t++){var i=PiecSettings.words.accross[e][2][t];-1==this.game.global.loadedLetters.indexOf(i)&&(this.game.load.image(i,PiecSettings.assetsDir+i+".png"),this.game.global.loadedLetters+=i,console.log("Loaded asset for "+i.toUpperCase()),void 0!==PiecSettings.useAlternativeAssetForSolvedLetters&&PiecSettings.useAlternativeAssetForSolvedLetters&&(console.log("Loading alternative letter"),this.game.load.image(i+"-2",PiecSettings.assetsDir+i+"-2.png")))}for(var e=0;e<PiecSettings.words.down.length;e++)for(var t=0;t<PiecSettings.words.down[e][2].length;t++){var i=PiecSettings.words.down[e][2][t];-1==this.game.global.loadedLetters.indexOf(i)&&(this.game.load.image(i,PiecSettings.assetsDir+i+".png"),this.game.global.loadedLetters+=i,console.log("Loaded asset for "+i.toUpperCase()),void 0!==PiecSettings.useAlternativeAssetForSolvedLetters&&PiecSettings.useAlternativeAssetForSolvedLetters&&(console.log("Loading alternative letter"),this.game.load.image(i+"-2",PiecSettings.assetsDir+i+"-2.png")))}this.game.load.image("cta",PiecSettings.assetsDir+"download.png"),this.game.load.image("cta-2",PiecSettings.assetsDir+"download_2.png"),this.game.load.image("hand",PiecSettings.assetsDir+"hand.png"),this.game.load.image("letters-background",PiecSettings.assetsDir+"pan.png"),this.game.load.image("board-background",PiecSettings.assetsDir+"board.png"),this.game.load.image("board-background-landscape",PiecSettings.assetsDir+"board_landscape.png"),this.game.load.image("box-cookie-empty",PiecSettings.assetsDir+"boxcookie_empty.png"),this.game.load.image("box-cookie-full",PiecSettings.assetsDir+"boxcookie_full.png"),this.game.load.image("star-cookie",PiecSettings.assetsDir+"star_cookie.png"),this.game.load.image("hint-button",PiecSettings.assetsDir+"hint.png"),this.game.load.image("star-particle",PiecSettings.assetsDir+"star_particle.png"),this.game.load.image("spark-particle",PiecSettings.assetsDir+"spark_particle.png"),this.game.load.image("puzzle-solved",PiecSettings.assetsDir+"puzzle_solved.png"),this.game.load.image("deco1",PiecSettings.assetsDir+"deco01.png"),this.game.load.image("deco2",PiecSettings.assetsDir+"deco02.png"),this.game.load.image("deco3",PiecSettings.assetsDir+"deco03.png"),this.game.global.animations={},PiecSettings.animation=PiecSettings.animation||{}}},{key:"onLoadComplete",value:function(){this.game.state.start("endcard")}}]),t}(Phaser.State);i.default=g},{"../animations.js":1,"../atlas/index":2,"../utils/custom-png-sequences-renderer.js":19,"../utils/util":20}],17:[function(e,t,i){"use strict";function o(e,t){e.loopReverse&&(e.animations.currentAnim.isReversed=!0),0!=t.loopCount&&t.loopCount===e.numberOfLoops&&(e.persistent||(t.loop=!1,e.alpha=0))}function n(e,t,i,o,n){t.loopReverse=n,t.speed=o,t.loopReverse?e.time.events.add(i,function(){t.alpha=1,t.animations.play("animation",o,!1),t.animations.currentAnim.onComplete.add(a,this)}):e.time.events.add(i,function(){t.alpha=1,t.animations.play("animation",o,!0)})}function a(e,t){e.animations.currentAnim.isReversed=!e.animations.currentAnim.isReversed,e.animations.play("animation",e.speed,!1)}function r(e,t,i,a,r,s,l,h,c,d,u,g){for(var f=d.offsetWidth*window.devicePixelRatio,p=d.offsetHeight*window.devicePixelRatio,w=d.offsetLeft*window.devicePixelRatio,m=d.offsetTop*window.devicePixelRatio,y=f/100,v=p/100,b=[],x=0;x<t.length;x++){var P=u.add.sprite(w+t[x]*y,m+i[x]*v,e);g.add(P),P.anchor.set(s),P.animations.add("animation"),P.alpha=0,P.persistent=c,n(u,P,a[x],l,!1),P.scale.x=f*h[x]/100/P.width,P.scale.y=P.scale.x,b.push(P),null!=r&&(P.numberOfLoops=r[x],P.animations.currentAnim.onLoop.add(o,this))}return b}function s(e,t,i,o,n,a){var r=t.scale.x;t.scale.x=.01,t.scale.y=.01,e.time.events.add(o,function(){e.add.tween(t.scale).to({x:r,y:r},i,Phaser.Easing.Back.Out,!0,0).onComplete.add(function(){e.time.events.add(n,function(){e.add.tween(t).to({alpha:0},i,Phaser.Easing.Quadratic.In,!0,0).onComplete.add(function(){t.destroy()},this)},this)},this)},this)}function l(e,t,i,o,n,a,r,s){e.time.events.add(r,function(){t.alpha=1,e.add.tween(t).to({y:o,x:i},a,s,!0,0),e.add.tween(t.scale).to({x:n,y:n},a,s,!0,0)},this),e.time.events.add(9e3+r,function(){e.add.tween(t).to({alpha:0},1e3,Phaser.Easing.Quadratic.InOut,!0,0),e.time.events.add(1e3,function(){t.destroy()},this)},this)}function h(e,t,i,o,n,a,r,s){e.time.events.add(r,function(){t.alpha=0,e.add.tween(t).to({alpha:[.5,1,0],y:o,x:i,angle:180},a,s,!0,0),e.add.tween(t.scale).to({x:n,y:n},a,s,!0,0)},this)}function c(e,t,i,o,n,a,r){this.starFloatWithDelayCustom(e,t,i,o,n,a,r,Phaser.Easing.Quadratic.Out)}Object.defineProperty(i,"__esModule",{value:!0}),i.onLoop=o,i.playAnimation=n,i.onComplete=a,i.playAnimations=r,i.spawnAndDissapear=s,i.starFloatWithDelayCustom2=l,i.starFloatWithDelayCustom=h,i.starFloatWithDelay=c},{}],18:[function(e,t,i){"use strict";function o(e,t){var i=document.getElementById(t),o=i.offsetWidth*window.devicePixelRatio,n=(i.offsetHeight,window.devicePixelRatio,i.getBoundingClientRect().left*window.devicePixelRatio),a=i.getBoundingClientRect().top*window.devicePixelRatio;e.x=n,e.y=a,e.scale.x=o/e.width,e.scale.y=e.scale.x}function n(e,t){var i=document.getElementById(t),o=(i.offsetWidth,window.devicePixelRatio,i.offsetHeight*window.devicePixelRatio),n=i.getBoundingClientRect().left*window.devicePixelRatio,a=i.getBoundingClientRect().top*window.devicePixelRatio;e.x=n,e.y=a,e.scale.y=o/e.height,e.scale.x=e.scale.y}function a(e,t){o(e,t),e.x+=e.width/2,e.y+=e.height/2}function r(e){return document.getElementById(e).getBoundingClientRect().top*window.devicePixelRatio}function s(e){return document.getElementById(e).getBoundingClientRect().left*window.devicePixelRatio}function l(e){return document.getElementById(e).offsetWidth*window.devicePixelRatio}function h(e,t){var i=document.getElementById(t),o=i.offsetWidth*window.devicePixelRatio;i.offsetHeight,window.devicePixelRatio;e.scale.x=o/e.width,e.scale.y=e.scale.x}Object.defineProperty(i,"__esModule",{value:!0}),i.fitInContainer=o,i.fitInContainerHeight=n,i.fitInContainerAnchorAtCenter=a,i.getContainerY=r,i.getContainerX=s,i.getContainerWidth=l,i.resizeToSizeOfContainer=h},{}],19:[function(e,t,i){"use strict";function o(e){if(null!=PiecSettings.pngAnimations)for(var t=0;t<PiecSettings.pngAnimations.length;t++){var i=PiecSettings.pngAnimations[t];n(e,i)}}function n(e,t){var i=t.src.substr(0,t.src.indexOf("."));e.load.spritesheet(i,PiecSettings.assetsDir+t.src,t.spriteWidth,t.spriteHeight,t.spriteNumber)}function a(e,t,i){
var o=t.src.substr(0,t.src.indexOf("."));if(null!=t.htmlContainer)var n=document.getElementById(t.htmlContainer),a=n.offsetWidth*window.devicePixelRatio,r=(n.offsetHeight,window.devicePixelRatio,n.getBoundingClientRect().left*window.devicePixelRatio),l=n.getBoundingClientRect().top*window.devicePixelRatio;var h=e.add.sprite(r,l,o);if(i.add(h),h.animations.add("animation"),h.anchor.set(0,0),h.alpha=0,null==t.loopReverse&&(t.loopReverse=!1),null!=t.isReversed&&t.isReversed&&(h.animations.currentAnim.isReversed=!0),s.playAnimation(e,h,t.delay,t.fps,t.loopReverse),null!=t.angle&&0!=t.angle){var c=0;this.game.global.windowWidth>this.game.global.windowHeight&&null!=t.responsiveAngle&&t.responsiveAngle&&(c=90),h.anchor.set(.5),h.angle=t.angle+c}if(null!=t.htmlContainer&&(h.scale.x=a/h.width,h.scale.y=h.scale.x,h.persistent=!1),null!=t.loops&&(h.numberOfLoops=t.loops,h.animations.currentAnim.onLoop.add(s.onLoop,this)),null!=t.effect&&-1!=t.effect.indexOf("fade-in")){h.alpha=0;e.add.tween(h).to({alpha:1},1e3,Phaser.Easing.Linear.None,!0,t.delay)}return h}Object.defineProperty(i,"__esModule",{value:!0}),i.preloadPngSequences=o,i.playPngSequence=a;var r=e("../utils/animations-util.js"),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(r)},{"../utils/animations-util.js":17}],20:[function(e,t,i){"use strict";function o(e,t){return t||(t=0),Math.floor(Math.random()*(e-t+1))+t}function n(e){return e[this.rndInt(e.length-1,0)]}function a(e){return e||(e=1),"rgba("+this.rndInt(256)+","+this.rndInt(256)+","+this.rndInt(256)+","+e+")"}function r(){return this.game.global.windowHeight>this.game.global.windowWidth}function s(e){return JSON.parse(JSON.stringify(e))}function l(e,t){var i=e.indexOf(t);i>-1&&e.splice(i,1)}function h(e){return-1===e.lastIndexOf(".")?e:e.substring(0,e.lastIndexOf("."))}function c(e){e.style.opacity=0;var t=+new Date;!function i(){e.style.opacity=+e.style.opacity+(new Date-t)/400,t=+new Date,+e.style.opacity<1&&(window.requestAnimationFrame&&requestAnimationFrame(i)||setTimeout(i,16))}()}function d(e){return 100*Math.sqrt(2*Math.abs(e)/w)}function u(e){var t={boolean:{},number:{},string:{}},i=[];return e.filter(function(e){var o=void 0===e?"undefined":p(e);return o in t?!t[o].hasOwnProperty(e)&&(t[o][e]=!0):!(i.indexOf(e)>=0)&&i.push(e)})}function g(e,t){var i,o={};for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(o[i]=e[i]);for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(o[i]=t[i]);return o}function f(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}Object.defineProperty(i,"__esModule",{value:!0});var p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i.rndInt=o,i.sample=n,i.rndRgba=a,i.isPortrait=r,i.clone=s,i.remove=l,i.removeExtension=h,i.fadeIn=c,i.calcQuadTime=d,i.uniq=u,i.extend=g,i.numberWithCommas=f;var w=19.8},{}]},{},[4]);
